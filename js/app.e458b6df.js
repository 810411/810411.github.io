(function(t){function e(e){for(var r,u,a=e[0],o=e[1],l=e[2],m=0,f=[];m<a.length;m++)u=a[m],s[u]&&f.push(s[u][0]),s[u]=0;for(r in o)Object.prototype.hasOwnProperty.call(o,r)&&(t[r]=o[r]);c&&c(e);while(f.length)f.shift()();return i.push.apply(i,l||[]),n()}function n(){for(var t,e=0;e<i.length;e++){for(var n=i[e],r=!0,a=1;a<n.length;a++){var o=n[a];0!==s[o]&&(r=!1)}r&&(i.splice(e--,1),t=u(u.s=n[0]))}return t}var r={},s={app:0},i=[];function u(e){if(r[e])return r[e].exports;var n=r[e]={i:e,l:!1,exports:{}};return t[e].call(n.exports,n,n.exports,u),n.l=!0,n.exports}u.m=t,u.c=r,u.d=function(t,e,n){u.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:n})},u.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},u.t=function(t,e){if(1&e&&(t=u(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var n=Object.create(null);if(u.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var r in t)u.d(n,r,function(e){return t[e]}.bind(null,r));return n},u.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return u.d(e,"a",e),e},u.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},u.p="/";var a=window["webpackJsonp"]=window["webpackJsonp"]||[],o=a.push.bind(a);a.push=e,a=a.slice();for(var l=0;l<a.length;l++)e(a[l]);var c=o;i.push([0,"chunk-vendors"]),n()})({0:function(t,e,n){t.exports=n("56d7")},"034f":function(t,e,n){"use strict";var r=n("64a9"),s=n.n(r);s.a},"0651":function(t,e,n){"use strict";var r=n("a9f9"),s=n.n(r);s.a},"0cd5":function(t,e,n){},"0d38":function(t,e,n){},"17ac":function(t,e,n){},"18fd":function(t,e,n){"use strict";var r=n("8532"),s=n.n(r);s.a},"4cd0":function(t,e,n){"use strict";var r=n("b9b9"),s=n.n(r);s.a},"56d7":function(t,e,n){"use strict";n.r(e);n("cadf"),n("551c"),n("f751"),n("097d");var r=n("2b0e"),s=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{attrs:{id:"app"}},[n("router-view")],1)},i=[],u=n("0a0d"),a=n.n(u),o=n("cebc"),l=n("2f62"),c={name:"App",methods:Object(o["a"])({},Object(l["b"])(["setLastGameDate"])),beforeMount:function(){null===this.$store.state.lastGameDate&&this.setLastGameDate({amount:a()()})}},m=c,f=(n("034f"),n("2877")),h=Object(f["a"])(m,s,i,!1,null,null,null),p=h.exports,d=n("0e44"),b="sum",v="dif",g="mul",T="div",C=[{id:b,title:"Суммирование",sign:"+"},{id:v,title:"Разность",sign:"-"},{id:g,title:"Умножение",sign:"×"},{id:T,title:"Деление",sign:"÷"}],y=3e3,_=60,k=864e5;r["a"].use(l["a"]);var w=new l["a"].Store({state:{lastGameDate:null,time:"3",level:"2",operations:[b],turnCount:0,trueAnswersCount:0},plugins:[Object(d["a"])()],getters:{roundTime:function(t){var e=t.time;return e*_}},mutations:{setLastGameDate:function(t,e){t.lastGameDate=e.amount},setTime:function(t,e){t.time=e.amount},setLevel:function(t,e){t.level=e.amount},setOperations:function(t,e){t.operations=e.amount},setTurnCount:function(t,e){t.turnCount=e.amount},setTrueAnswersCount:function(t,e){t.trueAnswersCount=e.amount}}}),x=n("8c4f"),N=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"main-page"},[n("h1",[t._v("Привет!")]),n("p",[t._v("Добро пожаловать на "+t._s(t.setGameDay)+" тренировочный день.")]),n("p",[t._v("Ваш последний результат - решено "+t._s(t.trueAnswersCount)+" из "+t._s(t.turnCount)+".")]),n("p",[t._v("Общая точность "+t._s(t.setAccuracy)+" %.")]),n("Settings",{staticClass:"settings",on:{submit:t.handleSubmit}})],1)},O=[],j=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("form",{on:{submit:function(e){return e.preventDefault(),t.$emit("submit",e)}}},[n("h2",[t._v("Настройки")]),n("ul",[n("li",[n("Range",{attrs:{"label-text":"Длительность "+t.time+" минут"+t.setTimeLabelTextEnding,id:"time",max:"5"},model:{value:t.time,callback:function(e){t.time=e},expression:"time"}})],1),n("li",[n("Range",{attrs:{"label-text":"Сложность "+t.setLevelTitle,id:"level",max:"3"},model:{value:t.level,callback:function(e){t.level=e},expression:"level"}})],1)]),n("ul",t._l(t.tasks,function(e,r){return n("li",{key:e.id},[n("Checkbox",{attrs:{id:e.id,"label-text":e.title,"is-checked":t.checkOperations.indexOf(e.id)>-1}})],1)}),0),n("button",{attrs:{type:"submit"}},[t._v("Играть!")])])},$=[],S=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("input",{attrs:{id:t.id,type:"checkbox",name:t.id},domProps:{checked:t.isChecked}}),n("label",{attrs:{for:t.id}},[t._v(t._s(t.labelText))])])},A=[],I={name:"Checkbox",props:{id:String,labelText:String,isChecked:Boolean}},D=I,M=(n("714d"),Object(f["a"])(D,S,A,!1,null,"0330d083",null)),G=M.exports,K=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("input",{attrs:{id:t.id,type:"range",name:t.id,min:"1",max:t.max,step:"1"},domProps:{value:t.value},on:{change:function(e){return t.$emit("change",e.target.value)}}}),n("p",[n("label",{attrs:{for:t.id}},[t._v(t._s(t.labelText))])])])},E=[],L={name:"Range",model:{event:"change"},props:{id:String,labelText:String,max:String,value:String}},P=L,R=(n("bc23"),Object(f["a"])(P,K,E,!1,null,"6ebb0021",null)),F=R.exports,V={id:"Settings",components:{Checkbox:G,Range:F},data:function(){return{time:this.$store.state.time,level:this.$store.state.level,tasks:C,checkOperations:this.$store.state.operations}},computed:{setTimeLabelTextEnding:function(){switch(this.time){case"1":return"а";case"5":return"";default:return"ы"}},setLevelTitle:function(){switch(this.level){case"1":return"легкая";case"3":return"трудная";default:return"средняя"}}}},B=V,J=(n("6fdb"),Object(f["a"])(B,j,$,!1,null,"3bec2e28",null)),U=J.exports,W={id:"MainPage",components:{Settings:U},data:function(){return{turnCount:this.$store.state.turnCount,trueAnswersCount:this.$store.state.trueAnswersCount,lastGameDate:this.$store.state.lastGameDate}},computed:{setGameDay:function(){return Math.floor((a()()-this.lastGameDate)/k)+1},setAccuracy:function(){return this.turnCount&&this.trueAnswersCount?Math.floor(this.trueAnswersCount/this.turnCount*100):0}},methods:Object(o["a"])({},Object(l["b"])(["setTime","setLevel","setOperations"]),{handleSubmit:function(t){var e=new FormData(t.target),n=e.get("time"),r=e.get("level"),s=C.map(function(t){var n=t.id;if(null!==e.get(n))return n}).filter(function(t){return t});this.setTime({amount:n}),this.setLevel({amount:r}),this.setOperations({amount:s}),this.$router.push("/game")}})},q=W,z=(n("6657"),Object(f["a"])(q,N,O,!1,null,"4c30277e",null)),H=z.exports,Q=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("button",{on:{click:t.stop}},[t._v("× Отмена")]),n("Timer",{attrs:{"round-time":t.roundTime,"current-time":t.currentTime}}),n("GameDisplay",{attrs:{operation:t.currentOperation,"user-input-color":t.userInputColor,"user-answer":t.userAnswer,"first-number":t.firstNumber,"result-number":t.resultNumber}}),n("Keyboard",{attrs:{"handle-key-click":t.handleKeyClick,pause:t.pause}})],1)},X=[],Y=n("e814"),Z=n.n(Y),tt=(n("28a5"),n("14b9"),function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"timer",class:{blink:t.currentTime<10},style:"background: linear-gradient(to right, #f6f6f6 "+t.barValue+"%, #e2f5ec "+t.barValue+"%)"},[t._v("\n    "+t._s(t.timeToView)+"\n")])}),et=[],nt=(n("c5f6"),{name:"Timer",props:{isWorked:Boolean,roundTime:Number,currentTime:Number},computed:{timeToView:function(){var t={minute:"2-digit",second:"2-digit"},e=new Intl.DateTimeFormat("en-US",t).format,n=new Date(1e3*this.currentTime);return e(n)},barValue:function(){return Math.floor(100*(this.roundTime-this.currentTime)/this.roundTime)}}}),rt=nt,st=(n("18fd"),Object(f["a"])(rt,tt,et,!1,null,"001dfac1",null)),it=st.exports,ut=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"keyboard"},t._l(t.keyTitles,function(e){return n("div",{staticClass:"key"},[n("RoundKey",{attrs:{"key-title":e,disabled:t.pause},on:{handleKeyClick:t.handleKeyClick}})],1)}),0)},at=[],ot=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("button",{class:[t.roundKeyClass,t.getClassForColor],attrs:{disabled:t.disabled},on:{click:function(e){return t.$emit("handleKeyClick",t.keyTitle)}}},[t._v("\n    "+t._s(t.keyTitle)+"\n")])},lt=[],ct={name:"RoundKey",props:{keyTitle:String,disabled:Boolean},data:function(){return{numberColorClass:"green",stringColorClass:"grey",roundKeyClass:"round-key"}},computed:{getClassForColor:function(){return""===this.keyTitle?"blank":Z()(this.keyTitle)?"green":"grey"}}},mt=ct,ft=(n("4cd0"),Object(f["a"])(mt,ot,lt,!1,null,"332aee8a",null)),ht=ft.exports,pt={name:"Keyboard",components:{RoundKey:ht},props:{handleKeyClick:Function,pause:Boolean},data:function(){return{keyTitles:["1","2","3","<","4","5","6","","7","8","9","?","","0","","="]}},methods:{}},dt=pt,bt=(n("8201"),Object(f["a"])(dt,ut,at,!1,null,"8051c76a",null)),vt=bt.exports,gt=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"game-display"},[n("p",[n("span",[t._v(t._s(t.firstNumber))]),n("span",[t._v(" "+t._s(t.setSign)+" ")]),n("span",{style:"color: "+t.userInputColor},[t._v(t._s(t.userAnswer))]),n("span",[t._v(" = ")]),n("span",[t._v(t._s(t.resultNumber)+" ")]),n("span",[t._v("? ")])])])},Tt=[],Ct={name:"GameDisplay",props:{operation:String,userAnswer:String,firstNumber:Number,resultNumber:Number,userInputColor:String},computed:{setSign:function(){var t=this;return C.filter(function(e){var n=e.id;return n===t.operation})[0].sign}}},yt=Ct,_t=(n("0651"),Object(f["a"])(yt,gt,Tt,!1,null,"b8ff5a0a",null)),kt=_t.exports,wt={name:"GamePage",components:{GameDisplay:kt,Timer:it,Keyboard:vt},data:function(){return{roundTime:this.$store.getters.roundTime,level:this.$store.state.level,operations:this.$store.state.operations,currentOperation:b,currentTime:0,timer:null,userInput:[],firstNumber:0,secondNumber:0,resultNumber:0,turnCount:0,trueAnswersCount:0,pause:!1,userInputColor:"lightgray"}},computed:{userAnswer:function(){var t=this.level-this.userInput.length;return("_".repeat(t)+this.userInput.join("")).substring(0,this.level)}},methods:Object(o["a"])({},Object(l["b"])(["setTurnCount","setTrueAnswersCount"]),{start:function(){var t=this;this.timer||(this.timer=setInterval(function(){t.currentTime>0?t.pause||t.currentTime--:(t.pause=!0,t.setTurnCount({amount:t.turnCount}),t.setTrueAnswersCount({amount:t.trueAnswersCount}),setTimeout(t.stop(),y))},1e3))},stop:function(){clearInterval(this.timer),this.$router.push("/")},handleKeyClick:function(t){this.userInput.length<this.level&&/^\d/.test(t)&&this.userInput.push(t),"<"===t&&this.userInput.length&&this.userInput.pop(),"?"===t&&(this.userInput=this.secondNumber.toFixed().split(""),this.userInputColor="#35495e",this.pause=!0,setTimeout(this.generateTask,y)),"="===t&&this.userInput.length>0&&(this.checkAnswer()?(this.trueAnswersCount++,this.userInputColor="#41b883"):this.userInputColor="red",this.pause=!0,setTimeout(this.generateTask,y))},generateTask:function(){if(this.pause=!1,!(this.currentTime<5)){this.turnCount++;var t=Math.floor(Math.random()*this.operations.length);this.currentOperation=this.operations[t],this.userInput=[],this.userInputColor="lightgray";var e=Math.pow(10,this.level)-2;this.prepareTask(e)}},prepareTask:function(t){var e;switch(this.firstNumber=Math.floor(Math.random()*t)+1,this.secondNumber=Math.floor(Math.random()*t)+1,this.currentOperation){case b:return void(this.resultNumber=this.firstNumber+this.secondNumber);case v:return e=this.firstNumber,this.resultNumber=this.firstNumber+this.secondNumber,this.firstNumber=this.resultNumber,void(this.resultNumber=e);case g:return void(this.resultNumber=this.firstNumber*this.secondNumber);case T:return e=this.firstNumber,this.resultNumber=this.firstNumber*this.secondNumber,this.firstNumber=this.resultNumber,void(this.resultNumber=e)}},checkAnswer:function(){return Z()(this.userInput.join(""))===this.secondNumber}}),mounted:function(){this.currentTime=this.roundTime,this.generateTask(),this.start()}},xt=wt,Nt=(n("afb9"),Object(f["a"])(xt,Q,X,!1,null,"07b1636a",null)),Ot=Nt.exports;r["a"].use(x["a"]);var jt=new x["a"]({routes:[{path:"/",name:"main",component:H},{path:"/game",name:"game",component:Ot}]});r["a"].config.productionTip=!1,new r["a"]({el:"#app",store:w,router:jt,render:function(t){return t(p)}})},"5fc1":function(t,e,n){},"64a9":function(t,e,n){},6657:function(t,e,n){"use strict";var r=n("17ac"),s=n.n(r);s.a},"6fdb":function(t,e,n){"use strict";var r=n("0cd5"),s=n.n(r);s.a},"714d":function(t,e,n){"use strict";var r=n("940c"),s=n.n(r);s.a},8201:function(t,e,n){"use strict";var r=n("9fa1"),s=n.n(r);s.a},8532:function(t,e,n){},"940c":function(t,e,n){},"9fa1":function(t,e,n){},a9f9:function(t,e,n){},afb9:function(t,e,n){"use strict";var r=n("0d38"),s=n.n(r);s.a},b9b9:function(t,e,n){},bc23:function(t,e,n){"use strict";var r=n("5fc1"),s=n.n(r);s.a}});
//# sourceMappingURL=app.e458b6df.js.map